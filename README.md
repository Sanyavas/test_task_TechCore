# Тестовое задание TechCore: Разработка мини-сервиса на FastAPI

- Инструкции по запуску (например, с помощью команды):
   ```bash
   pip install -r requirements.txt
   uvicorn app.main:app --reload

## Цель
Разработать небольшое асинхронное веб-приложение на базе FastAPI, которое будет:
- Взаимодействовать с внешними API,
- Осуществлять CRUD-операции с базой данных,
- Использовать возможности многопоточности/многозадачности для ускорения некоторых операций.

---

## Требования

### 1. Среда разработки:
- **FastAPI**
- **Async-библиотека** для запросов к внешнему API (например, `httpx` или `aiohttp`).

### 2. Функциональность сервиса:
Приложение должно получать и хранить информацию о продуктах (items) с полями:
- **id**: идентификатор продукта;
- **name**: название продукта;
- **description**: описание продукта;
- **price**: цена продукта;
- **external_id**: идентификатор, связанный с внешней системой.

---

## Задачи

### 1. Создание и запуск приложения на FastAPI:
- Приложение должно поддерживать асинхронный запуск (`async/await`).
- Настроить роутинг и обработку исключений.

### 2. Интеграция с базой данных:
- Создать миграции и таблицу для сущности `Product` (можно использовать SQLite для упрощения).
- Реализовать CRUD-эндпоинты:
  1. `POST /products/` — создание продукта;
  2. `GET /products/` — получение списка продуктов;
  3. `GET /products/{product_id}` — получение продукта по ID;
  4. `PUT /products/{product_id}` — обновление продукта;
  5. `DELETE /products/{product_id}` — удаление продукта.
- Все операции должны быть **асинхронными**.

### 3. Интеграция с внешним API:
- Использовать тестовый публичный API (например, `https://jsonplaceholder.typicode.com/` или любой другой).
- Реализовать эндпоинт `POST /products/fetch_external/`, который:
  - Принимает на вход список `external_id` (чисел или строк).
  - Асинхронно выполняет GET-запросы к внешнему API для каждого `external_id`.
  - На основе полученных данных создает или обновляет записи в локальной БД.
  - Выполняет внешние запросы **параллельно** для ускорения.

### 4. Использование фоновых задач или многопоточности (опционально):
- Реализовать эндпоинт `POST /products/refresh_all/`, который:
  - Запускает фоновую задачу для обновления данных по всем продуктам в БД.
  - Подтягивает обновленную информацию из внешнего API.
  - Процесс не должен блокировать основной поток (использовать `BackgroundTasks` из FastAPI или встроенные средства `asyncio`).
  - Результаты обновлений записываются в БД.

### 5. Логирование и обработка ошибок:
- Логировать успешные и неуспешные запросы к внешнему API.
- Обрабатывать ошибки, например:
  - Недоступность внешнего API.
  - Корректно возвращать коды ошибок и сообщения клиенту.

---

## Результат

1. Исходный код в репозитории (GitHub, GitLab и т.п.) или архивом.



 